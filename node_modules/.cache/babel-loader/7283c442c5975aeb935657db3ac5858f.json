{"ast":null,"code":"import _slicedToArray from\"/Users/yanguangjing/Desktop/infovis-assignment-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect}from\"react\";import*as d3 from\"d3\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Mainplot=function Mainplot(props){var splotSvg=useRef(null);var barplotSvg=useRef(null);var svgSize=props.margin*2+props.size;// data mean & deviation\nvar dataMean=[d3.mean(props.data.map(function(d){return parseFloat(d[0]);})),d3.mean(props.data.map(function(d){return parseFloat(d[1]);}))];var dataDev=[d3.deviation(props.data.map(function(d){return parseFloat(d[0]);})),d3.deviation(props.data.map(function(d){return parseFloat(d[1]);}))];//barColor\nvar barColor=[\"#fff1ac\",\"#d5a4cf\"];var barSvg,ySvg,lineSvg;//dino plot\nuseEffect(function(){//dataset\nvar datasetX=props.data.map(function(d){return parseFloat(d[0]);});var datasetY=props.data.map(function(d){return parseFloat(d[1]);});//define axisX\nvar linearX=d3.scaleLinear().domain([d3.min(datasetX),d3.max(datasetX)]).range([0,props.size]);var axisX=d3.axisBottom(linearX);//define axisY\nvar linearY=d3.scaleLinear().domain([d3.min(datasetY),d3.max(datasetY)]).range([props.size,0]);var axisY=d3.axisLeft(linearY);//append axisX\nvar svg=d3.select(splotSvg.current);svg.append(\"g\").attr(\"transform\",\"translate(\".concat(props.margin,\",\").concat(props.size+props.margin,\")\")).call(axisX);//append axisY\nsvg.append(\"g\").attr(\"transform\",\"translate(\".concat(props.margin,\",\").concat(props.margin,\")\")).call(axisY);//append dot\nvar dotSvg=svg.append(\"g\").attr(\"transform\",\"translate(\".concat(props.margin,\",\").concat(props.margin,\")\"));dotSvg.selectAll(\"circle\").data(props.data).enter().append(\"circle\").attr(\"class\",function(_,i){return\"circle\".concat(i);}).attr(\"r\",props.radius).attr(\"cx\",function(d){return linearX(d[0]);}).attr(\"cy\",function(d){return linearY(d[1]);});//append brush\nvar brush=d3.brush().extent([[0,0],[props.size,props.size]]).on(\"start brush end\",brushed);//.on(\"start\", cleared);\nvar brushSvg=svg.append(\"g\").attr(\"transform\",\"translate(\".concat(props.margin,\",\").concat(props.margin,\")\")).call(brush);// function cleared(){\n// \td3.selectAll(\"circle\").attr(\"fill\",\"black\");\n// }\nfunction brushed(event){var selection=event.selection;// brush none dot\nif(selection==null){d3.selectAll(\"circle\").attr(\"fill\",\"black\");barUpdate(dataMean,dataDev);return;}var _selection=_slicedToArray(selection,2),_selection$=_slicedToArray(_selection[0],2),x0=_selection$[0],y0=_selection$[1],_selection$2=_slicedToArray(_selection[1],2),x1=_selection$2[0],y1=_selection$2[1];//in section\nvar databrushed=props.data.map(function(d,i){var dataTX=linearX(parseFloat(d[0]));var dataTY=linearY(parseFloat(d[1]));if(x0<=dataTX&&dataTX<=x1&&y0<=dataTY&&dataTY<=y1)return true;else return false;});var inSectionId=databrushed.reduce(function(acc,cur,i){if(cur)acc.push(i);return acc;},[]);d3.selectAll(\"circle\").attr(\"fill\",\"black\");// set section color\ninSectionId.forEach(function(e){d3.selectAll(\".circle\".concat(e)).attr(\"fill\",\"red\");});// brush update\nif(inSectionId.length===0||inSectionId.length===1){barUpdate(dataMean,dataDev);}else{var sectionDataMean=[d3.mean(inSectionId.map(function(id){return parseFloat(props.data[id][0]);})),d3.mean(inSectionId.map(function(id){return parseFloat(props.data[id][1]);}))];var sectionDataDev=[d3.deviation(inSectionId.map(function(i){return parseFloat(props.data[i][0]);})),d3.deviation(inSectionId.map(function(i){return parseFloat(props.data[i][1]);}))];barUpdate(sectionDataMean,sectionDataDev);}}// eslint-disable-next-line\n},[]);//bar plot\nuseEffect(function(){//define axisX\nvar xScale=d3.scaleBand().domain([0,1]).range([0,props.size]).align(0.5).padding(props.barPadding);var tickText=d3.scaleBand().domain([\"x\",\"y\"]).range([0,props.size]).align(0.5).padding(props.barPadding);var axisX=d3.axisBottom(tickText);//define axisY\nvar yMax=d3.max([dataMean[0],dataMean[1]]);var yScale=d3.scaleLinear().domain([0,yMax]).range([props.size,0]);var axisY=d3.axisLeft(yScale);//append axisX\nvar svg=d3.select(barplotSvg.current);var xSvg=svg.append(\"g\").attr(\"transform\",\"translate(\".concat(props.margin,\",\").concat(props.size+props.margin,\")\")).call(axisX);//append axisY\nySvg=svg.append(\"g\").attr(\"transform\",\"translate(\".concat(props.margin,\",\").concat(props.margin,\")\")).call(axisY);//append bar\nbarSvg=svg.append(\"g\").attr(\"transform\",\"translate(\".concat(props.margin,\",\").concat(props.margin,\")\"));barSvg.selectAll(\"rect\").data(dataMean).enter().append(\"rect\").attr(\"width\",xScale.bandwidth()).attr(\"height\",function(d){return props.size-yScale(d);}).attr(\"x\",function(_,i){return xScale(i);}).attr(\"y\",function(d,_){return yScale(d);}).attr(\"fill\",function(_,i){return barColor[i];});//append errorbar\nlineSvg=svg.append(\"g\").attr(\"transform\",\"translate(\".concat(props.margin,\",\").concat(props.margin,\")\"));lineSvg.selectAll(\"line\").data(dataDev).enter().append(\"line\").style(\"stroke\",\"black\").attr(\"x1\",function(d,i){return xScale(i)+xScale.bandwidth()/2;}).attr(\"x2\",function(d,i){return xScale(i)+xScale.bandwidth()/2;}).attr(\"y1\",function(d,i){return yScale(dataMean[i]+d);}).attr(\"y2\",function(d,i){return yScale(dataMean[i]-d);});},[]);// update barplot\nfunction barUpdate(updateMean,updateDev){//define axisY\nvar yMax=d3.max(updateMean);var yScale=d3.scaleLinear().domain([0,yMax]).range([props.size,0]);var axisY=d3.axisLeft(yScale);//append axisY\nySvg.call(axisY);barSvg.selectAll(\"rect\").data(updateMean).join().transition().duration(10).attr(\"y\",function(d){return yScale(d);}).attr(\"height\",function(d){return props.size-yScale(d);});lineSvg.selectAll(\"line\").data(updateDev).join().transition().duration(60).style(\"stroke\",\"black\").attr(\"y1\",function(d,i){return yScale(updateMean[i]+d);}).attr(\"y2\",function(d,i){return yScale(updateMean[i]-d);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"svg\",{ref:splotSvg,width:svgSize,height:svgSize}),/*#__PURE__*/_jsx(\"svg\",{ref:barplotSvg,width:svgSize,height:svgSize})]});};export default Mainplot;","map":{"version":3,"names":["React","useRef","useEffect","d3","jsx","_jsx","jsxs","_jsxs","Mainplot","props","splotSvg","barplotSvg","svgSize","margin","size","dataMean","mean","data","map","d","parseFloat","dataDev","deviation","barColor","barSvg","ySvg","lineSvg","datasetX","datasetY","linearX","scaleLinear","domain","min","max","range","axisX","axisBottom","linearY","axisY","axisLeft","svg","select","current","append","attr","concat","call","dotSvg","selectAll","enter","_","i","radius","brush","extent","on","brushed","brushSvg","event","selection","barUpdate","_selection","_slicedToArray","_selection$","x0","y0","_selection$2","x1","y1","databrushed","dataTX","dataTY","inSectionId","reduce","acc","cur","push","forEach","e","length","sectionDataMean","id","sectionDataDev","xScale","scaleBand","align","padding","barPadding","tickText","yMax","yScale","xSvg","bandwidth","style","updateMean","updateDev","join","transition","duration","children","ref","width","height"],"sources":["/Users/yanguangjing/Desktop/infovis-assignment-1/src/components/Mainplot.js"],"sourcesContent":["import React, { useRef, useEffect} from \"react\";\nimport * as d3 from \"d3\";\n\n\n\nconst Mainplot = (props) => {\n\n\tconst splotSvg = useRef(null);\n  const barplotSvg = useRef(null);\n  const svgSize = props.margin * 2 + props.size;\n\t// data mean & deviation\n\tconst dataMean = [d3.mean(props.data.map(d => parseFloat(d[0]))),d3.mean(props.data.map(d => parseFloat(d[1])))];\n\tconst dataDev = [d3.deviation(props.data.map(d => parseFloat(d[0]))),d3.deviation(props.data.map(d => parseFloat(d[1])))];\n\t//barColor\n\tconst barColor = [\"#fff1ac\",\"#d5a4cf\"];\n\n\tlet barSvg, ySvg, lineSvg;\n\n\t//dino plot\n\tuseEffect(() => {\n\t\t//dataset\n\t\tlet datasetX = props.data.map(d => parseFloat(d[0]));\n\t\tlet datasetY = props.data.map(d => parseFloat(d[1]));\n\n\t\t//define axisX\n\t\tlet linearX = d3.scaleLinear().domain([d3.min(datasetX), d3.max(datasetX)]).range([0, props.size]);\n\t\tlet axisX = d3.axisBottom(linearX);\n\n\t\t//define axisY\n\t\tlet linearY = d3.scaleLinear().domain([d3.min(datasetY), d3.max(datasetY)]).range([props.size, 0]);\n\t\tlet axisY = d3.axisLeft(linearY);\n\n\t\t//append axisX\n\t\tconst svg = d3.select(splotSvg.current);\n\t\tsvg.append(\"g\")\n\t \t\t .attr(\"transform\", `translate(${props.margin},${props.size + props.margin})`)\n\t\t\t .call(axisX)\n\n\t\t//append axisY\n\t\tsvg.append(\"g\")\n\t\t\t .attr(\"transform\", `translate(${props.margin},${props.margin})`)\n\t\t\t .call(axisY)\n\n\t\t//append dot\n\t\tconst dotSvg = svg.append(\"g\")\n\t\t\t\t\t\t\t\t\t\t\t.attr(\"transform\", `translate(${props.margin},${props.margin})`)\n\t\tdotSvg.selectAll(\"circle\")\n\t\t\t\t\t.data(props.data)\n\t\t\t\t\t.enter()\n\t\t\t\t\t.append(\"circle\")\n\t\t\t\t\t.attr(\"class\", (_,i) => `circle${i}`)\n\t\t\t\t\t.attr(\"r\", props.radius)\n\t\t\t\t\t.attr(\"cx\", d => linearX(d[0]))\n\t\t\t\t\t.attr(\"cy\", d => linearY(d[1]))\n\n\n\t\t//append brush\n\t\tconst brush = d3.brush()\n      .extent([[0, 0], [props.size, props.size]])\n      .on(\"start brush end\", brushed)\n\t\t\t//.on(\"start\", cleared);\n\t\tconst brushSvg = svg.append(\"g\")\n\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"transform\", `translate(${props.margin},${props.margin})`)\n\t\t\t\t\t\t\t\t\t\t\t\t.call(brush)\n\n\t\t// function cleared(){\n\t\t// \td3.selectAll(\"circle\").attr(\"fill\",\"black\");\n\t\t// }\n\n\t\tfunction brushed(event) {\n    let selection = event.selection;\n\t\t\n\t\t// brush none dot\n    if (selection == null) {\n      d3.selectAll(\"circle\").attr(\"fill\", \"black\");\n\t\t\tbarUpdate(dataMean,dataDev);\n      return;\n    }\n\t\tlet [[x0, y0],[x1, y1]] = selection;\n\t\t//in section\n\t\tconst databrushed = props.data.map((d, i)=>{\n\t\t\tconst dataTX = linearX(parseFloat(d[0]));\n\t\t\tconst dataTY = linearY(parseFloat(d[1]));\n\t\t\tif(x0 <= dataTX && dataTX <= x1 && y0 <= dataTY && dataTY <= y1\n\t\t\t\t)return true;\n\t\t\telse return false;\t\n\t\t});\n\t\tconst inSectionId = databrushed.reduce((acc, cur, i) => {\n\t\t\tif (cur) acc.push(i);\n\t\t\treturn acc;\n\t\t}, [])\n\t\td3.selectAll(\"circle\").attr(\"fill\",\"black\");\n\t\t// set section color\n\t\tinSectionId.forEach(e =>{\n\t\t\td3.selectAll(`.circle${e}`)\n\t\t\t\t.attr(\"fill\",\"red\");\n\t\t} )\n\t\t// brush update\n\t\tif( inSectionId.length === 0 || inSectionId.length === 1){\n\t\t\tbarUpdate(dataMean,dataDev);\n\t\t}else\n\t\t{\n\t\t\tconst sectionDataMean = [d3.mean(inSectionId.map(id => parseFloat(props.data[id][0]))),d3.mean(inSectionId.map(id => parseFloat(props.data[id][1])))];\n\t\t\tconst sectionDataDev = [d3.deviation(inSectionId.map(i => parseFloat(props.data[i][0]))),d3.deviation(inSectionId.map(i => parseFloat(props.data[i][1])))];\n\t\t\tbarUpdate(sectionDataMean,sectionDataDev);\n\t\t}\n  }\n\t// eslint-disable-next-line\n\t}, []);\n\n\t//bar plot\n\tuseEffect(()=>{\n\t\t//define axisX\n\t\tconst xScale  = d3.scaleBand().domain([0, 1]).range([0, props.size]).align(0.5).padding(props.barPadding);\n\t\tconst tickText  = d3.scaleBand().domain([\"x\", \"y\"]).range([0, props.size]).align(0.5).padding(props.barPadding);\n\t\tlet axisX = d3.axisBottom(tickText);\n\n\t\t//define axisY\n\t\tconst yMax = d3.max([dataMean[0],dataMean[1]]);\n\t\tconst yScale  = d3.scaleLinear().domain([0, yMax]).range([props.size, 0]);\n\t\tlet axisY = d3.axisLeft(yScale);\n\n\t\t//append axisX\n\t\tconst svg = d3.select(barplotSvg.current);\n\t\tconst xSvg = svg.append(\"g\")\n\t \t\t .attr(\"transform\", `translate(${props.margin},${props.size + props.margin})`)\n\t\t\t .call(axisX)\n\n\t\t//append axisY\n\t\tySvg = svg.append(\"g\")\n\t\t\t .attr(\"transform\", `translate(${props.margin},${props.margin})`)\n\t\t\t .call(axisY)\n\n\t\t//append bar\n\t\tbarSvg = svg.append(\"g\")\n\t\t\t\t\t\t\t\t.attr(\"transform\", `translate(${props.margin},${props.margin})`);\n\n\t\tbarSvg.selectAll(\"rect\")\n\t\t\t\t\t.data(dataMean)\n\t\t\t\t\t.enter()\n\t\t\t\t\t.append(\"rect\")\n\t\t\t\t\t.attr(\"width\", xScale.bandwidth())\n          .attr(\"height\", d => props.size - yScale(d))\n\t\t\t\t\t.attr(\"x\", (_,i) => xScale(i))\n\t\t\t\t\t.attr(\"y\",(d,_) => yScale(d))\n\t\t\t\t\t.attr(\"fill\",(_,i)=>barColor[i])\n\n\t\t//append errorbar\n\t\tlineSvg = svg.append(\"g\")\n\t\t\t\t\t\t\t\t .attr(\"transform\", `translate(${props.margin},${props.margin})`);\n\t\t\n\t\tlineSvg.selectAll(\"line\")\n\t\t\t\t\t .data(dataDev)\n\t\t\t\t\t .enter()\n\t\t\t\t\t .append(\"line\")\n\t\t\t\t\t .style(\"stroke\",\"black\")\n\t\t\t\t\t .attr(\"x1\", (d, i) => xScale(i) + xScale.bandwidth() / 2)\n           .attr(\"x2\", (d, i) => xScale(i) + xScale.bandwidth() / 2)\n           .attr(\"y1\", (d, i) => yScale(dataMean[i] + d))\n           .attr(\"y2\", (d, i) => yScale(dataMean[i] - d))\n\n\t},[])\n\n\t// update barplot\n\tfunction barUpdate(updateMean, updateDev){\n\t\t//define axisY\n\t\tconst yMax = d3.max(updateMean);\n\t\tconst yScale = d3.scaleLinear().domain([0, yMax]).range([props.size, 0]);\n\t\tlet axisY = d3.axisLeft(yScale);\n\t\n\t\t//append axisY\n\t\tySvg.call(axisY)\n\t\t\n\t\tbarSvg.selectAll(\"rect\")\n\t\t\t\t\t.data(updateMean)\n\t\t\t\t\t.join()\n\t\t\t\t\t.transition()\n\t\t\t\t\t.duration(10)\n\t\t\t\t\t.attr(\"y\",d => yScale(d))\n\t\t\t\t\t.attr(\"height\",d => {\n\t\t\t\t\t\treturn props.size - yScale(d);});\n\n\t\tlineSvg.selectAll(\"line\")\n\t\t\t\t\t .data(updateDev)\n\t\t\t\t\t .join()\n\t\t\t\t\t .transition()\n\t\t\t\t\t .duration(60)\n\t\t\t\t\t .style(\"stroke\",\"black\")\n           .attr(\"y1\", (d, i) => yScale(updateMean[i] + d))\n           .attr(\"y2\", (d, i) => yScale(updateMean[i] - d))\n\t\t\t\n\t\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<svg ref={splotSvg} width={svgSize} height={svgSize}> \n\t\t\t</svg>\n      <svg ref={barplotSvg} width={svgSize} height={svgSize}> \n\t\t\t</svg>\n\n\t\t</div>\n\t)\n};\n\nexport default Mainplot;"],"mappings":"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"},"metadata":{},"sourceType":"module"}